import{r as t,e as a,h as i,H as c,g as e}from"./p-75b8bc7c.js";var r=function(t,a,i,c){return new(i||(i=Promise))((function(e,r){function s(t){try{h(c.next(t))}catch(a){r(a)}}function n(t){try{h(c.throw(t))}catch(a){r(a)}}function h(t){var a;t.done?e(t.value):(a=t.value,a instanceof i?a:new i((function(t){t(a)}))).then(s,n)}h((c=c.apply(t,a||[])).next())}))};const s=class{constructor(i){t(this,i),this.grecaptchaLoaded=a(this,"grecaptchaLoaded",7)}componentWillLoad(){this.loadRecaptchaScript()}componentDidLoad(){window.grecaptcha&&window.grecaptcha.render&&this.renderRecaptcha(window.grecaptcha)}reset(){return r(this,void 0,void 0,(function*(){window.grecaptcha.reset(this.grecaptchWidgetId)}))}handleGrecaptchaLoaded(){window.grecaptcha&&window.grecaptcha.render&&this.renderRecaptcha(window.grecaptcha)}loadRecaptchaScript(){return r(this,void 0,void 0,(function*(){const t=`https://www.google.com/recaptcha/api.js?hl=${this.language&&"fr"==this.language?"fr-CA":"en"}&onload=grecaptchaOnLoadCallback&render=explicit`,a=document.querySelector(`[src="${t}"]`);if(!window["grecaptcha]"]&&!a){const a=document.createElement("script");a.type="text/javascript",a.src=t,a.async=!0,a.defer=!0,a.onload=()=>{},window.grecaptchaOnLoadCallback=()=>r(this,void 0,void 0,(function*(){this.grecaptchaLoaded.emit()})),document.getElementsByTagName("head")[0].appendChild(a)}}))}grecaptchaCallback(t){this.checkbox.value=t,this.toggleChecked(this.checkbox,!0)}grecaptchaExpiredCallback(){this.checkbox.value="",this.toggleChecked(this.checkbox,!1)}grecaptchaErrorCallback(){this.checkbox.value="",this.toggleChecked(this.checkbox,!1)}toggleChecked(t,a){a!=t.checked&&t.click()}renderRecaptcha(t){const a=this.element.querySelector(".g-recaptcha");0===a.childNodes.length&&(this.grecaptchWidgetId=t.render(a,{sitekey:this.sitekey,callback:this.grecaptchaCallback.bind(this),"expired-callback":this.grecaptchaExpiredCallback.bind(this),"error-callback":this.grecaptchaErrorCallback.bind(this)}))}render(){return i(c,null,i("div",{class:"g-recaptcha",id:this.element.id+"-g-recaptcha"}),i("input",{ref:t=>this.checkbox=t,id:"recaptcha",name:"recaptcha",type:"checkbox",value:"",class:"hidden","data-field":"recaptcha",tabindex:"-1","aria-checked":"false","aria-invalid":"false","aria-describedby":"recaptcha_error",required:!0}),i("slot",{name:"error-messages"}))}get element(){return e(this)}};s.TAG_NAME="snt-recaptcha",s.style="";export{s as R}