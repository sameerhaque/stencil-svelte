import{r as a,e as t,h as e,H as c,g as i}from"./p-75b8bc7c.js";const s=class{constructor(e){a(this,e),this.grecaptchaLoaded=t(this,"grecaptchaLoaded",7)}componentWillLoad(){this.loadRecaptchaScript()}componentDidLoad(){window.grecaptcha&&window.grecaptcha.render&&this.renderRecaptcha(window.grecaptcha)}async reset(){window.grecaptcha.reset(this.grecaptchWidgetId)}handleGrecaptchaLoaded(){window.grecaptcha&&window.grecaptcha.render&&this.renderRecaptcha(window.grecaptcha)}async loadRecaptchaScript(){const a=`https://www.google.com/recaptcha/api.js?hl=${this.language&&"fr"==this.language?"fr-CA":"en"}&onload=grecaptchaOnLoadCallback&render=explicit`,t=document.querySelector(`[src="${a}"]`);if(!window["grecaptcha]"]&&!t){const t=document.createElement("script");t.type="text/javascript",t.src=a,t.async=!0,t.defer=!0,t.onload=()=>{},window.grecaptchaOnLoadCallback=async()=>{this.grecaptchaLoaded.emit()},document.getElementsByTagName("head")[0].appendChild(t)}}grecaptchaCallback(a){this.checkbox.value=a,this.toggleChecked(this.checkbox,!0)}grecaptchaExpiredCallback(){this.checkbox.value="",this.toggleChecked(this.checkbox,!1)}grecaptchaErrorCallback(){this.checkbox.value="",this.toggleChecked(this.checkbox,!1)}toggleChecked(a,t){t!=a.checked&&a.click()}renderRecaptcha(a){const t=this.element.querySelector(".g-recaptcha");0===t.childNodes.length&&(this.grecaptchWidgetId=a.render(t,{sitekey:this.sitekey,callback:this.grecaptchaCallback.bind(this),"expired-callback":this.grecaptchaExpiredCallback.bind(this),"error-callback":this.grecaptchaErrorCallback.bind(this)}))}render(){return e(c,null,e("div",{class:"g-recaptcha",id:this.element.id+"-g-recaptcha"}),e("input",{ref:a=>this.checkbox=a,id:"recaptcha",name:"recaptcha",type:"checkbox",value:"",class:"hidden","data-field":"recaptcha",tabindex:"-1","aria-checked":"false","aria-invalid":"false","aria-describedby":"recaptcha_error",required:!0}),e("slot",{name:"error-messages"}))}get element(){return i(this)}};s.TAG_NAME="snt-recaptcha",s.style="";export{s as R}