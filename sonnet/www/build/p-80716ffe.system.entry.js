var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return u([e,t])}}function u(s){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,i&&(o=s[0]&2?i["return"]:s[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;if(i=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;i=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(o=n.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){n.label=s[1];break}if(s[0]===6&&n.label<o[1]){n.label=o[1];o=s;break}if(o&&n.label<o[2]){n.label=o[2];n.ops.push(s);break}if(o[2])n.ops.pop();n.trys.pop();continue}s=t.call(e,n)}catch(a){s=[6,a];i=0}finally{r=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};System.register(["./p-286eaa2f.system.js","./p-c52706bc.system.js","./p-1bc037df.system.js","./p-39ad5390.system.js","./p-b8a342eb.system.js"],(function(e){"use strict";var t,n,r,i,o,s,a,u,l;return{setters:[function(e){t=e.r;n=e.e;r=e.h;i=e.H;o=e.g},function(){},function(){},function(e){s=e.W},function(e){a=e.K;u=e.a;l=e.N}],execute:function(){var c=function(){function e(e){this.label=e.label;this.key=e.key,this.url=e.url,this.id=e.id;this.languageId=e.languageId;this.parentId=e.parentId;this.expandable=e.expandable||false;this.visible=e.visible||false;this.focused=e.focused||false;this.selected=e.selected||false;this.expanded=e.expanded||false;this.domElement=e.domElement||null}return e}();var d='snt-treeview{display:block}snt-treeview .category-label{display:block}snt-treeview .category-label .iconCaret{padding-left:3px;font-size:10px}snt-treeview .category-label .iconCaret.expanded{-webkit-transform:rotate(-180deg);transform:rotate(-180deg);padding-right:3px;padding-left:0px}snt-treeview .category-label-row{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center}snt-treeview .category-text{display:-ms-inline-flexbox;display:inline-flex;justify-items:center;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-direction:column;flex-direction:column}snt-treeview .category-text:after{content:attr(data-text);height:0;visibility:hidden;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;font-weight:normal;font-family:"Averta-Regular"}@media speech{snt-treeview .category-text:after{display:none}}snt-treeview ul{list-style:none;padding:0}snt-treeview li,snt-treeview a{color:#323232;font-size:1rem;line-height:1.3125rem;text-decoration:none}snt-treeview li:focus,snt-treeview a:focus{outline:none}snt-treeview li:hover{cursor:pointer}snt-treeview li:hover>.category-label{font-weight:500;font-family:"Averta-ExtraBold", sans-serif;color:#147582}snt-treeview li:hover .iconCaret{font-weight:700}snt-treeview li{margin-bottom:1.25rem}snt-treeview li:last-child{margin-bottom:0}snt-treeview li.active>span{border-bottom:3px solid #147582;color:#147582}snt-treeview li>ul{padding:1rem 0 0.625rem 1.875rem}snt-treeview li>ul li{margin-bottom:1rem}snt-treeview li>ul li:last-child{margin-bottom:0}snt-treeview li>a:hover{font-weight:500;font-family:"Averta-ExtraBold", sans-serif;color:#147582;text-decoration:none}snt-treeview li:focus.focused .category-label>span{font-weight:500;font-family:"Averta-ExtraBold", sans-serif;color:#147582;outline:1px solid #147582;outline-offset:3px}snt-treeview li.selected .category-label>span{border-bottom:2px solid #147582;padding-bottom:2px;margin-bottom:-4px}snt-treeview li>span{pointer-events:none}snt-treeview li a:focus.focused>span{font-weight:500;font-family:"Averta-ExtraBold", sans-serif;color:#147582;outline:1px solid #147582;outline-offset:3px}snt-treeview a{display:block}snt-treeview a.selected>span{border-bottom:2px solid #147582;padding-bottom:2px;margin-bottom:-4px}snt-treeview a.active{border-bottom:2px solid #147582;color:#147582}snt-treeview [role=treeitem][aria-expanded=false]>ul{display:none}@media (min-width: 1024px){snt-treeview .category-label .iconCaret{font-size:12px}}';var f=undefined&&undefined.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r["throw"](e))}catch(t){o(t)}}function u(e){e.done?n(e.value):i(e.value).then(s,a)}u((r=r.apply(e,t||[])).next())}))};var h=e("snt_treeview",function(){function e(e){t(this,e);this.sntChange=n(this,"sntChange",7)}e.prototype.componentWillLoad=function(){var e=s.getObjectFromString(this.structure);this.treeitems=this.getItemsFromTree(e,this.treeitems=[]);this.keyboardEventProcessor=this.initKeyboardEventProcessor()};e.prototype.componentDidLoad=function(){};e.prototype.componentWillUpdate=function(){};e.prototype.componentDidUpdate=function(){var e=this.treeitems.find((function(e){return e.focused}));if(e){e.domElement.focus()}};e.prototype.getTreeitems=function(){return f(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,Promise.resolve(this.treeitems)]}))}))};e.prototype.updateExpandedTreeitems=function(e,t,n){return f(this,void 0,void 0,(function(){return __generator(this,(function(r){return[2,Promise.resolve(e.map((function(e){return t.indexOf(e)!=-1?new c(Object.assign(Object.assign({},e),{expanded:typeof n=="boolean"?n:!e.expanded})):e})))]}))}))};e.prototype.updateVisibleTreeitems=function(e,t,n){return f(this,void 0,void 0,(function(){return __generator(this,(function(r){return[2,Promise.resolve(e.map((function(e){return t.indexOf(e)!=-1?new c(Object.assign(Object.assign({},e),{visible:typeof n=="boolean"?n:!e.visible})):e})))]}))}))};e.prototype.updateFocusedTreeitems=function(e,t,n){return f(this,void 0,void 0,(function(){return __generator(this,(function(r){return[2,Promise.resolve(e.map((function(e){var r=function(t){return t.id===e.id};return t.some(r)?new c(Object.assign(Object.assign({},e),{focused:typeof n=="boolean"?n:!e.focused})):e.focused?new c(Object.assign(Object.assign({},e),{focused:false})):e})))]}))}))};e.prototype.updateSelectedTreeitems=function(e,t,n){return f(this,void 0,void 0,(function(){return __generator(this,(function(r){return[2,Promise.resolve(e.map((function(e){var r=function(t){return t.id===e.id};return t.some(r)?new c(Object.assign(Object.assign({},e),{selected:typeof n=="boolean"?n:!e.selected})):e.selected?new c(Object.assign(Object.assign({},e),{selected:false})):e})))]}))}))};e.prototype.findNodeByProperty=function(e,t){return f(this,void 0,void 0,(function(){return __generator(this,(function(n){return[2,this.treeitems.find((function(n){return n[e]==t}))]}))}))};e.prototype.findNodeByUrlOrKey=function(e){return this.treeitems.find((function(t){return t["key"]===e||t["url"]===e}))};e.prototype.selectNodeByUrlOrKey=function(e,t,n){if(n===void 0){n=true}return f(this,void 0,void 0,(function(){var r,i,o,s,a;return __generator(this,(function(u){switch(u.label){case 0:return[4,this.findNodeByUrlOrKey(e)];case 1:r=u.sent();if(t){i=this.treeitems.find((function(e){return e.parentId==r.id&&e.key===t}))}i=i||this.treeitems.find((function(e){return e.parentId==r.id}));if(!i)return[3,3];return[4,this.toggleTreeitem(r,true)];case 2:u.sent();u.label=3;case 3:o=this;return[4,this.updateFocusedTreeitems(this.treeitems,[i?i:r],true)];case 4:o.treeitems=u.sent();s=i?[r,i]:[r];a=this;return[4,this.updateSelectedTreeitems(this.treeitems,s,true)];case 5:a.treeitems=u.sent();if(n){this.sntChange.emit({node:i?i:r,parentNode:i?r:null,originalEvent:null})}return[2]}}))}))};e.prototype.updateTreeView=function(e){return f(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){this.structure=e;t=s.getObjectFromString(this.structure);this.treeitems=this.getItemsFromTree(t,this.treeitems=[]);return[2]}))}))};e.prototype.initKeyboardEventProcessor=function(){var e=this;return a.newInstance().withKey(u.ARROW_UP,(function(t){e.moveSelection(t,l.BACKWARDS)})).withKey(u.ARROW_DOWN,(function(t){e.moveSelection(t,l.FORWARDS)})).withKey(u.ARROW_RIGHT,(function(t){var n=e.treeitems.find((function(e){return e.domElement==t.target}));if(n&&n.expandable){if(n.expanded){e.moveSelection(t,l.FORWARDS);return}e.toggleTreeitem(n)}})).withKey(u.ARROW_LEFT,(function(t){return f(e,void 0,void 0,(function(){var e,n,r;return __generator(this,(function(i){switch(i.label){case 0:e=this.treeitems.find((function(e){return e.domElement==t.target}));if(e&&e.expandable&&e.expanded){this.toggleTreeitem(e);return[2]}if(!e.parentId)return[3,2];n=this.treeitems.find((function(t){return t.id==e.parentId}));r=this;return[4,this.updateFocusedTreeitems(this.treeitems,[n])];case 1:r.treeitems=i.sent();i.label=2;case 2:return[2]}}))}))})).withKey(u.HOME,(function(t){e.moveSelection(t,l.FIRST)})).withKey(u.END,(function(t){e.moveSelection(t,l.LAST)})).withKey(u.ASTERISK,(function(t){var n=e.treeitems.find((function(e){return e.domElement==t.target}));var r=e.treeitems.filter((function(e){return e.expandable&&e.parentId==n.parentId}));r.forEach((function(t){e.toggleTreeitem(t,true)}))})).withKeys([u.ENTER,u.SPACE],(function(t){return f(e,void 0,void 0,(function(){var e,n,r,i;return __generator(this,(function(o){switch(o.label){case 0:t.preventDefault();e=this.treeitems.find((function(e){return e.domElement==t.target}));if(!e)return[2];if(!e.expandable)return[3,1];t.preventDefault();this.toggleTreeitem(e);return[3,3];case 1:n=this.treeitems.find((function(t){return t.id==e.parentId}));r=n?[n,e]:[e];i=this;return[4,this.updateSelectedTreeitems(this.treeitems,r,true)];case 2:i.treeitems=o.sent();this.sntChange.emit({node:e,parentNode:n||null,originalEvent:t});o.label=3;case 3:return[2]}}))}))})).withDefaultHandler((function(t){return f(e,void 0,void 0,(function(){var e,n;return __generator(this,(function(r){switch(r.label){case 0:e=this.getNextSelectableNodeByFirstCharacter(this.treeitems,t.key);if(!e)return[3,2];n=this;return[4,this.updateFocusedTreeitems(this.treeitems,[e])];case 1:n.treeitems=r.sent();r.label=2;case 2:return[2]}}))}))})).build()};e.prototype.moveSelection=function(e,t){return f(this,void 0,void 0,(function(){var n,r;return __generator(this,(function(i){switch(i.label){case 0:e.preventDefault();n=this.getNextSelectableNode(this.treeitems,t);if(!n)return[3,2];r=this;return[4,this.updateFocusedTreeitems(this.treeitems,[n])];case 1:r.treeitems=i.sent();i.label=2;case 2:return[2]}}))}))};e.prototype.getNextSelectableNodeByFirstCharacter=function(e,t,n){if(n===void 0){n=l.FORWARDS}var r=e.filter((function(e){return e.visible&&e.label[0].toLowerCase()==t.toLowerCase()}));var i=r.find((function(e){return e.focused}));var o=r.indexOf(i);var s=(o+(n==l.FORWARDS?1:-1)+r.length)%r.length;return r[s]};e.prototype.getNextSelectableNode=function(e,t){var n=e.filter((function(e){return e.visible}));var r=n.find((function(e){return e.focused}));var i=n.indexOf(r);if((t==l.BACKWARDS||t==l.FIRST)&&i==0){return false}if((t==l.FORWARDS||t==l.LAST)&&i==n.length-1){return false}var o=t==l.FORWARDS?i+1:t==l.BACKWARDS?i-1:t==l.LAST?n.length-1:0;return n[o]};e.prototype.onClickCategory=function(e){return f(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(r){switch(r.label){case 0:t=this.treeitems.find((function(t){return t.domElement==e.target}));if(!t)return[2];e.preventDefault();if(!t.expandable)return[3,3];return[4,this.toggleTreeitem(t)];case 1:r.sent();n=this;return[4,this.updateFocusedTreeitems(this.treeitems,[t],true)];case 2:n.treeitems=r.sent();r.label=3;case 3:return[2]}}))}))};e.prototype.onClickLink=function(e,t){return f(this,void 0,void 0,(function(){var n,r,i,o;return __generator(this,(function(s){switch(s.label){case 0:n=this.treeitems.find((function(t){return t.id==e.parentId}));this.sntChange.emit({node:e,parentNode:n||null,originalEvent:t});r=this;return[4,this.updateFocusedTreeitems(this.treeitems,[e],true)];case 1:r.treeitems=s.sent();i=n?[n,e]:[e];o=this;return[4,this.updateSelectedTreeitems(this.treeitems,i,true)];case 2:o.treeitems=s.sent();return[2]}}))}))};e.prototype.toggleTreeitem=function(e,t){return f(this,void 0,void 0,(function(){var n,r,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.updateExpandedTreeitems(this.treeitems,[e],t)];case 1:n=o.sent();e=n.find((function(t){return t.domElement==e.domElement}));r=n.filter((function(t){return t.parentId==e.id}));i=this;return[4,this.updateVisibleTreeitems(n,r)];case 2:i.treeitems=o.sent();return[2]}}))}))};e.prototype.onKeydown=function(e){if(this.keyboardEventProcessor.hasDelegatedHandler(e)||this.keyboardEventProcessor.hasDefaultHandler()){this.keyboardEventProcessor.process(e)}};e.prototype.onFocusin=function(e){return f(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:e=this.treeitems.find((function(e){return e.focused||e.selected}));if(!!e)return[3,2];t=this;return[4,this.updateFocusedTreeitems(this.treeitems,[this.treeitems[0]])];case 1:t.treeitems=n.sent();n.label=2;case 2:return[2]}}))}))};e.prototype.getItemsFromTree=function(e,t,n){var r=this;var i=n;if(e.title){i=new c({label:e.title,key:e.key,url:e.url,id:t.length+1,languageId:e.languageId,parentId:n?n.id:null,expandable:e.items&&e.items.length>0,expanded:!!e.expanded,visible:!n||n.expanded});t.push(i)}if(e.items){e.items.forEach((function(e){r.getItemsFromTree(e,t,i)}))}return t};e.prototype.buildTreeview=function(e,t,n){var i=this;if(n===void 0){n=null}var o=e.filter((function(e){return e.parentId==n}));var s=this.treeitems.find((function(e){return e.selected||e.focused}));var a=o.reduce((function(n,o){var a=t?t+"-"+o.key:null;var u=e.indexOf(o)==0;return __spreadArrays(n,[r("li",{role:o.expandable?"treeitem":"none",id:a,"aria-expanded":o.expanded?"true":"false","data-index":o.expandable?e.indexOf(o):null,tabindex:o.expandable&&(o.focused||u&&!s)?"0":"-1",ref:function(e){o.domElement=e},class:{focused:o.focused,selected:o.selected},onClick:i.onClickCategory.bind(i)},o.expandable?[r("span",{class:"category-label"},r("span",{class:"category-label-row"},r("span",{class:"category-text","data-text":o.label},o.label)," ",r("span",{class:"icon-font iconCaret "+(o.expanded?"expanded":"")}))),i.buildTreeview(e,a,o.id)]:[r("a",{role:"treeitem",id:a+"-link",href:"javascript:void(0)",class:{focused:o.focused,selected:o.selected},"data-index":e.indexOf(o),ref:function(e){o.domElement=e},tabindex:o.focused||u&&!s?"0":"-1",onClick:function(e){i.onClickLink(o,e)}},r("span",{class:"category-text","data-text":o.label},o.label))])])}),[]);return r("ul",{role:n==null?"tree":"group"},a)};e.prototype.render=function(){return r(i,{onKeydown:this.onKeydown.bind(this),onFocusin:this.onFocusin.bind(this)},this.buildTreeview(this.treeitems,this.hostElement.id))};Object.defineProperty(e.prototype,"hostElement",{get:function(){return o(this)},enumerable:false,configurable:true});return e}());h.TAG_NAME="snt-treeview";h.style=d}}}));